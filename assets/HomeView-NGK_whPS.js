import{r as a,s as $,b as L,x as k,c as g,o as w,a as e,w as x,v as m,t as f,j as V}from"./index-DH2l403a.js";import{a as E}from"./index-NIGUFBhG.js";import{u as S,a as U}from"./todoList-BIZk6Lus.js";const C={class:"flex flex-col justify-center p-8 lg:p-[60px] gap-[24px]"},j={class:"w-full flex flex-col gap-2"},T={class:"text-danger"},B={class:"w-full flex flex-col gap-2"},D={class:"text-danger"},R="https://todolist-api.hexschool.io/",M={__name:"LoginForm",emits:["changeLoginView"],setup(b,{emit:p}){const t=a({email:"",password:""}),u=a(""),l=a(""),r=a(""),d=S(),v=U(),{loading:i}=$(v),h=async()=>{let c=!1;if(t.value.email===""?(l.value="請輸入信箱!",c=!0):l.value="",t.value.password===""?(r.value="請輸入密碼!",c=!0):r.value="",!c){i.value=!0;try{const o=await E.post(`${R}users/sign_in`,t.value);d.setUser(o.data.nickname,o.data.token),document.cookie=`customTodoToken=${o.data.token};path=/`,document.cookie=`nickname=${o.data.nickname}; path=/;`,u.value="登入成功",alert(u.value),setTimeout(()=>{k.push("/todolist")},0)}catch(o){if(o.response&&o.response.data){const s=o.response.data;alert(s.message)}else alert(o.message)}i.value=!1}},y=p,_=()=>{y("changeLoginView")};return L(()=>{d.initUser(),d.isLoggedIn&&k.push("/todolist")}),(c,o)=>(w(),g("div",C,[o[4]||(o[4]=e("h2",{class:"text-center text-2xl font-bold"},"最實用的線上代辦事項服務",-1)),e("div",j,[o[2]||(o[2]=e("label",{for:"email",class:"font-bold"},"Email",-1)),x(e("input",{type:"text",name:"email",placeholder:"請輸入Email",class:"w-full px-[16px] py-[12px] rounded-[10px]","onUpdate:modelValue":o[0]||(o[0]=s=>t.value.email=s)},null,512),[[m,t.value.email]]),e("div",T,f(l.value),1)]),e("div",B,[o[3]||(o[3]=e("label",{for:"password",class:"font-bold"},"密碼",-1)),x(e("input",{type:"password",name:"password",placeholder:"請輸入密碼",class:"w-full px-[16px] py-[12px] rounded-[10px]","onUpdate:modelValue":o[1]||(o[1]=s=>t.value.password=s)},null,512),[[m,t.value.password]]),e("div",D,f(r.value),1)]),e("button",{onClick:h,class:"mx-auto font-bold bg-secondary text-white py-[12px] px-[48px] rounded-[10px]"}," 登入 "),e("button",{class:"mx-auto font-bold py-[12px] px-[48px] rounded-[10px]",onClick:_}," 註冊帳號 ")]))}},A={class:"flex flex-col justify-center md:p-8 gap-[24px]"},I={class:"w-full flex flex-col gap-2"},N={class:"text-danger"},F={class:"w-full flex flex-col gap-2"},H={class:"text-danger"},J={class:"w-full flex flex-col gap-2"},P={class:"text-danger"},Q={class:"w-full flex flex-col gap-2"},Y={class:"text-danger"},q="https://todolist-api.hexschool.io/",z={__name:"SignUp",emits:["changeLoginView"],setup(b,{emit:p}){const t=U(),{loading:u}=$(t),l=a({email:"",password:"",nickname:""}),r=a(""),d=a(""),v=a(""),i=a(""),h=a(""),y=async()=>{let o=!1;if(l.value.email===""?(d.value="請輸入信箱!",o=!0):d.value="",l.value.nickname===""?(v.value="請輸入暱稱!",o=!0):v.value="",l.value.password!==r.value?(i.value="兩次輸入密碼不一致，請確認!",o=!0):l.value.password.length<6?(i.value="密碼長度不足 6 個字",o=!0):i.value="",!o){u.value=!0;try{await E.post(`${q}users/sign_up`,l.value),h.value="註冊成功，請嘗試登入",alert(h.value),_("changeLoginView")}catch(s){if(s.response&&s.response.data){const n=s.response.data;alert(n.message)}else alert(s.message)}u.value=!1}},_=p,c=()=>{_("changeLoginView")};return(o,s)=>(w(),g("div",A,[s[8]||(s[8]=e("h2",{class:"text-2xl font-bold"},"註冊帳號",-1)),e("div",I,[s[4]||(s[4]=e("label",{for:"email",class:"font-bold"},"Email",-1)),x(e("input",{type:"text",name:"email",placeholder:"請輸入Email",class:"w-full px-[16px] py-[12px] rounded-[10px]","onUpdate:modelValue":s[0]||(s[0]=n=>l.value.email=n)},null,512),[[m,l.value.email]]),e("div",N,f(d.value),1)]),e("div",F,[s[5]||(s[5]=e("label",{for:"name",class:"font-bold"},"您的暱稱",-1)),x(e("input",{type:"text",name:"name",placeholder:"請輸入暱稱",class:"w-full px-[16px] py-[12px] rounded-[10px]","onUpdate:modelValue":s[1]||(s[1]=n=>l.value.nickname=n)},null,512),[[m,l.value.nickname]]),e("div",H,f(v.value),1)]),e("div",J,[s[6]||(s[6]=e("label",{for:"password",class:"font-bold"},"密碼",-1)),x(e("input",{type:"password",name:"password",placeholder:"請輸入密碼",class:"w-full px-[16px] py-[12px] rounded-[10px]","onUpdate:modelValue":s[2]||(s[2]=n=>l.value.password=n)},null,512),[[m,l.value.password]]),e("div",P,f(i.value),1)]),e("div",Q,[s[7]||(s[7]=e("label",{for:"retypepassword",class:"font-bold"},"再次輸入密碼",-1)),x(e("input",{type:"password",name:"retypepassword",placeholder:"請輸入密碼",class:"w-full px-[16px] py-[12px] rounded-[10px]","onUpdate:modelValue":s[3]||(s[3]=n=>r.value=n)},null,512),[[m,r.value]]),e("div",Y,f(i.value),1)]),e("button",{onClick:y,class:"mx-auto font-bold bg-secondary text-white py-[12px] px-[48px] rounded-[10px]"}," 註冊帳號 "),e("button",{class:"mx-auto font-bold py-[12px] px-[48px] rounded-[10px]",onClick:c}," 登入 ")]))}},G={class:"bg-primary flex justify-center"},K={class:"flex flex-col items-center p-8 md:p-16 md:flex-row w-full min-h-[100vh] max-w-[1028px] md:gap-8"},O={class:"w-full md:w-1/2"},W={key:0},X={key:1},oe={__name:"HomeView",setup(b){const p=a("true"),t=()=>{p.value=!p.value};return(u,l)=>(w(),g("div",G,[e("div",K,[l[0]||(l[0]=e("div",{class:"flex flex-col gap-8 items-center md:w-1/2"},[e("img",{src:"https://ch933114.github.io/vue-final-project/assets/logo_lg-B-R8YQ67.png",alt:"logo照片"}),e("img",{src:"https://ch933114.github.io/vue-final-project/assets/img-CMEnPsJI.png",alt:"系統插圖",class:"hidden md:flex w-[386px] h-[386px]"})],-1)),e("div",O,[p.value?(w(),g("div",W,[V(M,{onChangeLoginView:t})])):(w(),g("div",X,[V(z,{onChangeLoginView:t})]))])])]))}};export{oe as default};
